{"ast":null,"code":"var _jsxFileName = \"/Users/rainfalling/RainFalling/\\u65E0\\u950B/homework/train/reactBase/src/pages/popular/Popular.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Button, Spin, Row, Col } from 'antd';\nimport { getAll, getMoreByUrl } from '../../services/Popular';\nimport './Popular.css';\nimport PopularCard from '../../components/PopularCard/PopularCard';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Popular = props => {\n  _s();\n\n  const [list, setList] = useState([]);\n  const [hasMore, setHasMore] = useState(true);\n  const [pageNum, setPageNum] = useState(1);\n  const [pageType, setPageType] = useState(undefined);\n  const [preType, setPreType] = useState(undefined);\n  const typeList = [{\n    label: 'All',\n    type: undefined\n  }, {\n    label: 'Javascript',\n    type: '+language:javascript'\n  }, {\n    label: 'Ruby',\n    type: '+language:Ruby'\n  }, {\n    label: 'Java',\n    type: '+language:Java'\n  }, {\n    label: 'CSS',\n    type: '+language:CSS'\n  }];\n  useEffect(() => {\n    // getMore(null, 1, [])\n    // 初始化\n    getAll(pageNum).then(res => {\n      if (res.data) {\n        res.data.items && setList(res.data.items);\n        setPageNum(pageNum + 1);\n      }\n    }).catch(() => {\n      alert('别刷太快噢亲～');\n      setList([]);\n      setHasMore(false);\n    });\n  }, []);\n\n  const getMore = (pageType, pageNum, pageList) => {\n    setHasMore(true);\n\n    if (!pageType) {\n      // 拉取全部\n      getAll(pageNum).then(res => {\n        if (res.data) {\n          res.data.items && setList([...pageList, ...res.data.items]);\n          setPageNum(pageNum + 1);\n          setHasMore(false);\n        }\n      }).catch(() => {\n        alert('别刷太快噢亲～');\n        setList([]);\n        setHasMore(false);\n      });\n    } else {\n      getMoreByUrl(pageType, pageNum).then(res => {\n        setList([...pageList, ...res.data.items]);\n        setPageNum(pageNum + 1);\n        setHasMore(false);\n      }).catch(() => {\n        alert('别刷太快噢亲～');\n        setList([]);\n        setHasMore(false);\n      });\n    }\n  }; // 顶部六个选择\n\n\n  const TopNav = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      display: 'flex',\n      listStyle: 'none',\n      fontWeight: 'bold'\n    },\n    children: typeList.map((i, index) => /*#__PURE__*/_jsxDEV(\"a\", {\n      style: {\n        margin: '10px 10px',\n        textDecoration: 'none',\n        fontSize: '16px'\n      } // onMouseEnter={() => setPageType(i.type)}\n      ,\n      onClick: () => {\n        setPageType(i.type);\n        setList([]);\n        getMore(i.type, 1, []);\n      },\n      className: pageType === i.type ? 'topNavBtnSelect' : 'topNavBtn',\n      children: i.label\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 27\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      flexDirection: 'column',\n      alignItems: 'center',\n      display: 'flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(TopNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), list && list.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        loadMore: () => getMore(pageType, pageNum, list),\n        loader: null,\n        hasMore: true,\n        initialLoad: true,\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          type: \"flex\",\n          justify: \"center\",\n          align: \"center\",\n          children: list.map((i, index) => /*#__PURE__*/_jsxDEV(Col, {\n            xs: 24,\n            sm: 12,\n            md: 8,\n            lg: 6,\n            children: /*#__PURE__*/_jsxDEV(PopularCard, {\n              item: i,\n              index: index\n            }, i.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 43\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 41\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(Spin, {\n      size: \"large\",\n      tip: \"\\u52A0\\u8F7D\\u4E2D...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }, this), list && list.length > 0 && /*#__PURE__*/_jsxDEV(Spin, {\n      size: \"large\",\n      tip: \"\\u52A0\\u8F7D\\u4E2D...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 35\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Popular, \"fvorFuock6j2bpp8jcPRanseI90=\");\n\n_c = Popular;\nexport default Popular;\n\nvar _c;\n\n$RefreshReg$(_c, \"Popular\");","map":{"version":3,"sources":["/Users/rainfalling/RainFalling/无锋/homework/train/reactBase/src/pages/popular/Popular.js"],"names":["React","useState","useEffect","Button","Spin","Row","Col","getAll","getMoreByUrl","PopularCard","InfiniteScroll","Link","Popular","props","list","setList","hasMore","setHasMore","pageNum","setPageNum","pageType","setPageType","undefined","preType","setPreType","typeList","label","type","then","res","data","items","catch","alert","getMore","pageList","TopNav","flexDirection","alignItems","display","listStyle","fontWeight","map","i","index","margin","textDecoration","fontSize","length","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Button, Spin, Row, Col,\n} from 'antd';\nimport { getAll, getMoreByUrl } from '../../services/Popular';\nimport './Popular.css';\nimport PopularCard from '../../components/PopularCard/PopularCard';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { Link } from 'react-router-dom';\n\nconst Popular = (props) => {\n  const [list, setList] = useState([]);\n  const [hasMore, setHasMore] = useState(true);\n  const [pageNum, setPageNum] = useState(1);\n  const [pageType, setPageType] = useState(undefined);\n  const [preType, setPreType] = useState(undefined);\n\n  const typeList = [\n    {\n      label: 'All',\n      type: undefined,\n    },\n    {\n      label: 'Javascript',\n      type: '+language:javascript',\n    },\n    {\n      label: 'Ruby',\n      type: '+language:Ruby',\n    },\n    {\n      label: 'Java',\n      type: '+language:Java',\n    },\n    {\n      label: 'CSS',\n      type: '+language:CSS',\n    },\n  ];\n\n  useEffect(() => {\n    // getMore(null, 1, [])\n    // 初始化\n\n    getAll(pageNum).then(\n      (res) => {\n        if (res.data) {\n          res.data.items && setList(res.data.items);\n          setPageNum(pageNum + 1);\n        }\n      },\n    ).catch(() => {\n      alert('别刷太快噢亲～');\n      setList([]);\n      setHasMore(false);\n    });\n  }, []);\n\n  const getMore = (pageType, pageNum, pageList) => {\n    setHasMore(true);\n    if (!pageType) {\n      // 拉取全部\n      getAll(pageNum).then(\n        (res) => {\n          if (res.data) {\n            res.data.items && setList([...pageList, ...res.data.items]);\n            setPageNum(pageNum + 1);\n            setHasMore(false);\n          }\n        },\n      ).catch(() => {\n        alert('别刷太快噢亲～');\n        setList([]);\n        setHasMore(false);\n      });\n    } else {\n      getMoreByUrl(pageType, pageNum).then(\n        (res) => {\n          setList([...pageList, ...res.data.items]);\n          setPageNum(pageNum + 1);\n          setHasMore(false);\n        },\n      ).catch(() => {\n        alert('别刷太快噢亲～');\n        setList([]);\n        setHasMore(false);\n      });\n    }\n  };\n\n  // 顶部六个选择\n  const TopNav = () => (\n\n    <div style={{\n      flexDirection: 'row',\n      alignItems: 'center',\n      display: 'flex',\n      listStyle: 'none',\n      fontWeight: 'bold',\n    }}\n    >\n      {\n                        typeList.map((i, index) => (\n                          <a\n                            key={index}\n                            style={{ margin: '10px 10px', textDecoration: 'none', fontSize: '16px' }}\n                                  // onMouseEnter={() => setPageType(i.type)}\n                            onClick={() => {\n                              setPageType(i.type);\n                              setList([]);\n                              getMore(i.type, 1, []);\n                            }}\n                            className={(pageType === i.type) ? 'topNavBtnSelect' : 'topNavBtn'}\n                          >\n                            {i.label}\n                          </a>\n                        ))\n                    }\n\n    </div>\n\n  );\n\n  return (\n    <div style={{ flexDirection: 'column', alignItems: 'center', display: 'flex' }}>\n      <TopNav />\n      {list && list.length > 0\n        ? (\n          <div>\n            <InfiniteScroll\n              loadMore={() => getMore(pageType, pageNum, list)}\n              loader={null}\n              hasMore\n              initialLoad\n            >\n              {/* 卡片区域 */}\n              {/* <div className={\"listArea\"}> */}\n              <Row type=\"flex\" justify=\"center\" align=\"center\">\n                {\n                                    list.map(\n                                      (i, index) => (\n                                        <Col xs={24} sm={12} md={8} lg={6}>\n                                          <PopularCard item={i} key={i.id} index={index} />\n                                        </Col>\n                                      ),\n                                    )\n                                }\n              </Row>\n\n              {/* </div> */}\n            </InfiniteScroll>\n          </div>\n        )\n        : <Spin size=\"large\" tip=\"加载中...\" />}\n      {list && list.length > 0 && <Spin size=\"large\" tip=\"加载中...\" />}\n\n    </div>\n\n  );\n};\nexport default Popular;\n"]},"metadata":{},"sourceType":"module"}