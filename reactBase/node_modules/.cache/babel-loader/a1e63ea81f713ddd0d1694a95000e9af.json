{"ast":null,"code":"var _jsxFileName = \"/Users/rainfalling/RainFalling/\\u65E0\\u950B/homework/train/reactBase/src/pages/popular/Popular.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Spin, Row, Col, Alert } from 'antd';\nimport { getAll, getMoreByUrl } from '../../services/Popular';\nimport './Popular.css';\nimport PopularCard from '../../components/PopularCard/PopularCard';\nimport InfiniteScroll from 'react-infinite-scroller'; // import { Link } from 'react-router-dom';\n\nimport PopularNav from \"./PopularNav\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Popular = () => {\n  _s();\n\n  const [list, setList] = useState([]);\n  const [pageNum, setPageNum] = useState(1); // eslint-disable-next-line no-unused-vars\n\n  const [pageType, setPageType] = useState(\"all\");\n  useEffect(() => {\n    // getMore(null, 1, [])\n    // 初始化\n    // eslint-disable-next-line no-use-before-define\n    const type = GetQueryString(\"type\"); // eslint-disable-next-line no-use-before-define\n\n    getMore(type, 1, []);\n  }, []); // 获得更多数据\n  // eslint-disable-next-line no-shadow\n\n  const getMore = (pageType, pageNum, pageList) => {\n    setPageType(pageType);\n\n    if (pageType === 'all') {\n      // 拉取全部\n      getAll(pageNum).then(res => {\n        if (res.data) {\n          res.data.items && setList([...pageList, ...res.data.items]);\n          setPageNum(pageNum + 1);\n        }\n      }).catch(() => {\n        alert('别刷太快噢亲～');\n        setList([]);\n      });\n    } else {\n      getMoreByUrl(pageType, pageNum).then(res => {\n        setList([...pageList, ...res.data.items]);\n        setPageNum(pageNum + 1);\n      }).catch(() => {\n        alert('别刷太快噢亲～');\n        setList([]);\n      });\n    }\n  };\n\n  const updateList = type => {\n    setList([]);\n    getMore(type, 1, []);\n  };\n\n  const GetQueryString = name => {\n    const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`, \"i\");\n    const r = window.location.search.substr(1).match(reg);\n    if (r != null) return decodeURI(r[2]);\n    return null;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      flexDirection: 'column',\n      alignItems: 'center',\n      display: 'flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(PopularNav, {\n      callback: updateList,\n      currentType: pageType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), list && list.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        loadMore: () => getMore(pageType, pageNum, list),\n        loader: null,\n        hasMore: true,\n        initialLoad: true,\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          type: \"flex\",\n          justify: \"center\",\n          align: \"center\",\n          children: list.map((i, index) => /*#__PURE__*/_jsxDEV(Col, {\n            xs: 24,\n            sm: 12,\n            md: 8,\n            lg: 6,\n            children: /*#__PURE__*/_jsxDEV(PopularCard, {\n              item: i,\n              index: index\n            }, i.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 43\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 41\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(Spin, {\n      size: \"large\",\n      tip: \"\\u52A0\\u8F7D\\u4E2D...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }, this), list && list.length > 0 && /*#__PURE__*/_jsxDEV(Spin, {\n      size: \"large\",\n      tip: \"\\u52A0\\u8F7D\\u4E2D...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 35\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: show ? 'block' : 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        message: \"Success Tips\",\n        type: \"success\",\n        showIcon: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Popular, \"vP1jWUdvSU1RXV0a2A96rT4rf70=\");\n\n_c = Popular;\nexport default Popular;\n\nvar _c;\n\n$RefreshReg$(_c, \"Popular\");","map":{"version":3,"sources":["/Users/rainfalling/RainFalling/无锋/homework/train/reactBase/src/pages/popular/Popular.js"],"names":["React","useState","useEffect","Spin","Row","Col","Alert","getAll","getMoreByUrl","PopularCard","InfiniteScroll","PopularNav","Popular","list","setList","pageNum","setPageNum","pageType","setPageType","type","GetQueryString","getMore","pageList","then","res","data","items","catch","alert","updateList","name","reg","RegExp","r","window","location","search","substr","match","decodeURI","flexDirection","alignItems","display","length","map","i","index","id","show"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Spin, Row, Col,Alert\n} from 'antd';\nimport { getAll, getMoreByUrl } from '../../services/Popular';\nimport './Popular.css';\nimport PopularCard from '../../components/PopularCard/PopularCard';\nimport InfiniteScroll from 'react-infinite-scroller';\n// import { Link } from 'react-router-dom';\nimport PopularNav from \"./PopularNav\";\n\n\nconst Popular = () => {\n  const [list, setList] = useState([]);\n  const [pageNum, setPageNum] = useState(1);\n  // eslint-disable-next-line no-unused-vars\n  const [pageType, setPageType] = useState(\"all\");\n\n\n\n  useEffect(() => {\n    // getMore(null, 1, [])\n    // 初始化\n\n    // eslint-disable-next-line no-use-before-define\n    const type = GetQueryString(\"type\");\n    // eslint-disable-next-line no-use-before-define\n    getMore(type, 1, []);\n\n  }, []);\n\n  // 获得更多数据\n  // eslint-disable-next-line no-shadow\n  const getMore = (pageType, pageNum, pageList) => {\n    setPageType(pageType);\n    if (pageType === 'all') {\n      // 拉取全部\n      getAll(pageNum).then(\n        (res) => {\n          if (res.data) {\n            res.data.items && setList([...pageList, ...res.data.items]);\n            setPageNum(pageNum + 1);\n          }\n        },\n      ).catch(() => {\n        alert('别刷太快噢亲～');\n        setList([]);\n      });\n    } else {\n      getMoreByUrl(pageType, pageNum).then(\n        (res) => {\n          setList([...pageList, ...res.data.items]);\n          setPageNum(pageNum + 1);\n        },\n      ).catch(() => {\n        alert('别刷太快噢亲～');\n        setList([]);\n      });\n    }\n  };\n\n  const updateList = (type) =>{\n    setList([]);\n    getMore(type, 1, []);\n  };\n\n  const GetQueryString = (name) =>{\n    const reg = new RegExp(`(^|&)${  name  }=([^&]*)(&|$)`, \"i\");\n    const r = window.location.search.substr(1).match(reg);\n    if (r != null) return decodeURI(r[2]);\n    return null;\n  }\n\n\n\n\n  return (\n    <div style={{ flexDirection: 'column', alignItems: 'center', display: 'flex' }}>\n      <PopularNav callback={updateList} currentType={pageType}/>\n      {list && list.length > 0\n        ? (\n          <div>\n            <InfiniteScroll\n              loadMore={() => getMore(pageType, pageNum, list)}\n              loader={null}\n              hasMore\n              initialLoad\n            >\n              {/* 卡片区域 */}\n              {/* <div className={\"listArea\"}> */}\n              <Row type=\"flex\" justify=\"center\" align=\"center\">\n                {\n                                    list.map(\n                                      (i, index) => (\n                                        <Col xs={24} sm={12} md={8} lg={6}>\n                                          <PopularCard item={i} key={i.id} index={index} />\n                                        </Col>\n                                      ),\n                                    )\n                                }\n              </Row>\n\n              {/* </div> */}\n            </InfiniteScroll>\n          </div>\n        )\n        : <Spin size=\"large\" tip=\"加载中...\" />}\n      {list && list.length > 0 && <Spin size=\"large\" tip=\"加载中...\" />}\n\n      <div style={{ display: show ? 'block' : 'none' }}>\n        <Alert message=\"Success Tips\" type=\"success\" showIcon />\n      </div>\n    </div>\n\n  );\n};\nexport default Popular;\n"]},"metadata":{},"sourceType":"module"}