{"ast":null,"code":"var _jsxFileName = \"/Users/rainfalling/RainFalling/\\u65E0\\u950B/homework/train/reactBase/src/pages/popular/PoPularList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Button, Spin, Row, Col } from \"antd\";\nimport { getAll, getMoreByUrl } from \"../../services/Popular\";\nimport \"./Popular.css\";\nimport PopularCard from \"../../components/PopularCard/PopularCard\";\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PopularList = props => {\n  _s();\n\n  const [list, setList] = useState([]);\n  const [hasMore, setHasMore] = useState(true);\n  const [pageNum, setPageNum] = useState(1);\n  const [pageType, setPageType] = useState(undefined);\n  const [preType, setPreType] = useState(undefined); // if (this.props.location){\n  //\n  // }\n\n  const typeList = [{\n    label: \"All\",\n    type: undefined\n  }, {\n    label: \"Javascript\",\n    type: \"+language:javascript\"\n  }, {\n    label: \"Ruby\",\n    type: \"+language:Ruby\"\n  }, {\n    label: \"Java\",\n    type: \"+language:Java\"\n  }, {\n    label: \"CSS\",\n    type: \"+language:CSS\"\n  }];\n  useEffect(() => {\n    // getMore(null, 1, [])\n    //初始化\n    getAll(pageNum).then(res => {\n      if (res.data) {\n        res.data.items && setList(res.data.items);\n        setPageNum(pageNum + 1);\n      }\n    });\n  }, []);\n\n  const getMore = (pageType, pageNum, pageList) => {\n    setHasMore(true);\n\n    if (!pageType) {\n      //拉取全部\n      getAll(pageNum).then(res => {\n        if (res.data) {\n          res.data.items && setList([...pageList, ...res.data.items]);\n          setPageNum(pageNum + 1);\n          setHasMore(false);\n        }\n      });\n    } else {\n      getMoreByUrl(pageType, pageNum).then(res => {\n        setList([...pageList, ...res.data.items]);\n        setPageNum(pageNum + 1);\n        setHasMore(false);\n      });\n    }\n  }; //顶部六个选择\n\n\n  const TopNav = () => {\n    const path = {\n      pathname: `/list?type=${pageType || \"all\"}`\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        display: 'flex',\n        listStyle: 'none',\n        fontWeight: 'bold'\n      },\n      children: typeList.map((i, index) => /*#__PURE__*/_jsxDEV(Link, {\n        style: {\n          margin: \"10px 10px\",\n          textDecoration: 'none',\n          fontSize: \"16px\"\n        },\n        onClick: () => {\n          setPageType(i.type);\n          setList([]);\n          getMore(i.type, 1, []);\n        },\n        to: path,\n        className: pageType === i.type ? \"topNavBtnSelect\" : \"topNavBtn\",\n        children: i.label\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      flexDirection: 'column',\n      alignItems: 'center',\n      display: \"flex\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(TopNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }, this), list && list.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        loadMore: () => getMore(pageType, pageNum, list),\n        loader: null,\n        hasMore: true,\n        initialLoad: true,\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          type: \"flex\",\n          justify: \"center\",\n          align: \"center\",\n          children: list.map((i, index) => /*#__PURE__*/_jsxDEV(Col, {\n            xs: 24,\n            sm: 12,\n            md: 8,\n            lg: 6,\n            children: /*#__PURE__*/_jsxDEV(PopularCard, {\n              item: i,\n              index: index\n            }, i.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 45\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(Spin, {\n      size: \"large\",\n      tip: \"加载中...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 23\n    }, this), list && list.length > 0 && /*#__PURE__*/_jsxDEV(Spin, {\n      size: \"large\",\n      tip: \"加载中...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 45\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 13\n  }, this);\n};\n\n_s(PopularList, \"fvorFuock6j2bpp8jcPRanseI90=\");\n\n_c = PopularList;\nexport default PopularList;\n\nvar _c;\n\n$RefreshReg$(_c, \"PopularList\");","map":{"version":3,"sources":["/Users/rainfalling/RainFalling/无锋/homework/train/reactBase/src/pages/popular/PoPularList.js"],"names":["React","useState","useEffect","Button","Spin","Row","Col","getAll","getMoreByUrl","PopularCard","InfiniteScroll","Link","PopularList","props","list","setList","hasMore","setHasMore","pageNum","setPageNum","pageType","setPageType","undefined","preType","setPreType","typeList","label","type","then","res","data","items","getMore","pageList","TopNav","path","pathname","flexDirection","alignItems","display","listStyle","fontWeight","map","i","index","margin","textDecoration","fontSize","length","id"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport {Button, Spin, Row, Col} from \"antd\";\nimport {getAll, getMoreByUrl} from \"../../services/Popular\";\nimport \"./Popular.css\";\nimport PopularCard from \"../../components/PopularCard/PopularCard\";\nimport InfiniteScroll from 'react-infinite-scroller';\nimport {Link} from \"react-router-dom\";\n\n\nconst PopularList = (props) => {\n        const [list, setList] = useState([]);\n        const [hasMore, setHasMore] = useState(true);\n        const [pageNum, setPageNum] = useState(1);\n        const [pageType, setPageType] = useState(undefined);\n        const [preType, setPreType] = useState(undefined);\n\n        // if (this.props.location){\n        //\n        // }\n        const typeList = [\n            {\n                label: \"All\",\n                type: undefined\n            },\n            {\n                label: \"Javascript\",\n                type: \"+language:javascript\"\n            },\n            {\n                label: \"Ruby\",\n                type: \"+language:Ruby\"\n            },\n            {\n                label: \"Java\",\n                type: \"+language:Java\"\n            },\n            {\n                label: \"CSS\",\n                type: \"+language:CSS\"\n            },\n        ]\n\n\n        useEffect(() => {\n            // getMore(null, 1, [])\n            //初始化\n            getAll(pageNum).then(\n                res => {\n                    if (res.data) {\n                        res.data.items && setList(res.data.items);\n                        setPageNum(pageNum + 1);\n                    }\n                }\n            );\n        }, []);\n\n        const getMore = (pageType, pageNum, pageList) => {\n            setHasMore(true)\n            if (!pageType) {\n                //拉取全部\n                getAll(pageNum).then(\n                    res => {\n                        if (res.data) {\n                            res.data.items && setList([...pageList, ...res.data.items]);\n                            setPageNum(pageNum + 1);\n                            setHasMore(false);\n                        }\n                    }\n                );\n            } else {\n                getMoreByUrl(pageType, pageNum).then(\n                    res => {\n                        setList([...pageList, ...res.data.items]);\n                        setPageNum(pageNum + 1)\n                        setHasMore(false)\n                    }\n                )\n            }\n\n        };\n\n        //顶部六个选择\n        const TopNav = () => {\n            const path = {\n                pathname: `/list?type=${pageType || \"all\"}`,\n            };\n            return (\n\n                <div style={{\n                    flexDirection: 'row',\n                    alignItems: 'center',\n                    display: 'flex',\n                    listStyle: 'none',\n                    fontWeight: 'bold',\n                }}>\n                    {\n                        typeList.map((i, index) =>\n                            <Link key={index} style={{margin: \"10px 10px\", textDecoration: 'none', fontSize: \"16px\"}}\n                                  onClick={() => {\n                                      setPageType(i.type);\n                                      setList([]);\n                                      getMore(i.type, 1, []);\n                                  }}\n                                  to={path}\n                                  className={(pageType === i.type) ? \"topNavBtnSelect\" : \"topNavBtn\"}>\n                                {i.label}\n                            </Link>\n                        )\n                    }\n\n                </div>\n\n\n            )\n        }\n\n\n        return (\n            <div style={{flexDirection: 'column', alignItems: 'center', display: \"flex\"}}>\n                <TopNav/>\n                {list && list.length > 0 ?\n                    <div>\n                        <InfiniteScroll\n                            loadMore={() => getMore(pageType, pageNum, list)}\n                            loader={null}\n                            hasMore={true}\n                            initialLoad={true}\n                        >\n                            {/*卡片区域*/}\n                            {/*<div className={\"listArea\"}>*/}\n                            <Row type=\"flex\" justify=\"center\" align=\"center\">\n                                {\n                                    list.map(\n                                        (i, index) =>\n                                            <Col xs={24} sm={12} md={8} lg={6}>\n                                                <PopularCard item={i} key={i.id} index={index}/>\n                                            </Col>\n                                    )\n                                }\n                            </Row>\n\n                            {/*</div>*/}\n                        </InfiniteScroll>\n                    </div>\n                    : <Spin size={\"large\"} tip={\"加载中...\"}/>}\n                {list && list.length > 0 && <Spin size={\"large\"} tip={\"加载中...\"}/>}\n\n            </div>\n\n        )\n    }\n;\n\n\nexport default PopularList;\n"]},"metadata":{},"sourceType":"module"}